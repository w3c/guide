---
title: Organize a Technical Report Transition (2023 Process)
toc: false
---

<h2 id="sotd">About This Document</h2>

<p>This resource assists in finding the internal W3C Technical Report publication processes.</p>

<h2 id="snext">Next Steps</h2>
<div class="field">
	<label for="shortname" id="shortnameLabel">
		<span class="field-label">Shortname</span>
	</label>
	<div class="field-hint" id="hint-shortname">You may use a TR shortname to find out your next step</div>
	<input type="text" id="shortname" name="shortname" aria-describedby="hint-shortname" class="input-width-40"
	minlength="3" maxlength="40" list="w3ctr">
	
	<datalist id='w3ctr'>
	</datalist>
</div>

<div aria-live="assertive" aria-atomic="true" id='next'>
	<div id='spec'>
		<p><strong>We found the following information:</strong></p>
		<ul>
			<li>Title: <span id='spec_title'></span></li>
			<li>Shortname: <span id='spec_shortname'></span></li>
			<li>Date: <span id='spec_date'></span></li>
			<li>Shortlink: <span id='spec_shortlink'></span></li>
			<li>URL: <span id='spec_uri'></span></li>
			<li>Status: <span id='spec_status'></span></li>
			<li>Published by: <span id='spec_deliverers'></span></li>
		</ul>
	</div>
	
	<p><strong>Your possible next steps are:</strong></p>
	
	<ul id='step_list'>
	</ul>
</div>

<h2 id='resources'>Other resources</h2>
<ul>
	<li><a href=".">Organize a Technical Report Transition</a></li>
	<li><a href="milestones.html">Milestones planning</a></li>
	<li><a href="timeline.svg">174 days to W3C Recommendation</a></li>
	<li><a href="https://www.w3.org/policies/process/#Reports">Recommendation Track Process</a></li>
</ul>

<script type="module">
	import configuration from 'https://www.w3.org/PM/Groups/lib/config.js';
	import hal from 'https://www.w3.org/PM/Groups/lib/hal.js';
	import { json } from 'https://www.w3.org/PM/Groups/lib/fetch.js'
	
	const config = configuration();
	
	const trace = (config.debug)? console.log : () => {};
	
	function getLatestSpec(shortname) {
		return json(`${config.w3cAPI}/specifications/` + shortname).then(spec => {
			const shortname = spec.shortname;
			return json(spec["_links"]["latest-version"].href).then(latest => {
				latest.shortname = shortname;
				return latest;
			});
		});
	}
	
	async function findSpecOptions(shortname) {
		const items = hal(`${config.w3cAPI}/specifications-by-shortname/` + shortname, "specifications");
		const specs = [];
		for await (const item of items) {
			specs.push(item);
		}
		return (specs.length > 0) ?
			specs.map(s => s.href.split('/').at(-1))
			: [];
	}
	
	
	// State and browser history handling
	// browser history status push
	function onpushstate() {
		let query = "";
		// this query setup is more cumbersome but it favors clean/reduced url query
		if (config.shortname) {
			query = "?shortname=" + config.shortname;
		}
		window.history.pushState(config, config.shortname, query);
		trace("pushed " + window.location.href);
	}
	
	// browser back and forward buttons
	window.onpopstate = function (e) {
		config = e.state || {};
		adjustForms();
		trace("popped " + window.location.href);
	}
	
	function findShortname(s) {
		const w3ctr = document.getElementById("w3ctr");
		if (s.length > 2) {
			while (w3ctr.firstChild) {
				w3ctr.removeChild(w3ctr.firstChild);
			}
			findSpecOptions(s).then(options => {
				// dynamic autocompletion
				options.forEach(option => {
					const elt = document.createElement('option');
					elt.value = option;
					w3ctr.appendChild(elt);
				});
				// display a spec if we find one
				getLatestSpec(s)
				.then(spec => {
					return json(spec._links.deliverers.href + "?embed=true").then(deliverers => {
						deliverers = deliverers._embedded.deliverers;
						spec.isGroupClosed = deliverers.reduce((a, c) => a && c["is_closed"], true);
						spec.deliverers = deliverers;
						return spec;
					});
				}).then(spec => {
					config.shortname = s;
					updateSpec(spec);
					onpushstate();
					trace(spec);
				}).catch(err => {
					// console.error(err);
					updateSpec();
				});
			});
		}
	}
	
	const BASE = "./";
	const INPLACE = "<li><a href='https://www.w3.org/guide/standards-track/republishing/'>In-place modification of W3C Technical Reports</a></li>";
	function listItem(text, query) {
		return "<li><a href='" + BASE + '?' + query + "'>" + text + "</a></li>";
	}
	
	function nextSteps(spec) {
		const next = document.getElementById("next");
		const list = document.getElementById("step_list");
		
		if (spec.isGroupClosed) {
			if (spec.status === "Recommendation") {
				list.innerHTML = INPLACE + listItem("Publish an Amended Recommendation with only editorial changes", "profile=REC&rec=editorial")
				+ listItem("Publish a Candidate Recommendation with substantive changes (but no new features)", "profile=CR&cr=rec-amended")
				+ listItem("Propose to obsolete or supersede the Recommendation", "profile=PR-OBSL");
			} else if (spec.status === "Group Note") {
				list.innerHTML = INPLACE + listItem("contact webreq@w3.org", "profile=WG-NOTE");
			} else if (spec.status === "Retired") {
				list.innerHTML = listItem("Propose to restore the Recommendation", "");
			} else {
				list.innerHTML = listItem("Publish as Working Group Note (oops, this should have been done already)", "profile=WG-NOTE");
			}
		} else if (spec.status === "Working Draft" || spec.status === "First Public Working Draft") { // !isGroupClosed(spec)
			let wd = "";
			if (!spec["_links"]["predecessor-version"]) {
				if ((new Date()).toISOString().slice(0,10) === spec.date) wd = INPLACE; // same day only
			}
			list.innerHTML = wd + listItem("Revise the Working Draft", "profile=WD")
			+ listItem("Advance to Candidate Recommendation", "profile=CR&cr=new")
			+ listItem("Publish as a Discontinued Draft", "profile=DISC");
		} else if (spec.status === "Candidate Recommendation") {
			list.innerHTML = listItem("Revise the Candidate Recommendation Draft", "profile=CR&cr=draft")
			+ listItem("Revise as a Candidate Recommendation Snapshot", "profile=CR&cr=snapshot")
			+ listItem("Advance to Recommendation", "profile=newREC")
			+ listItem("Return to Working Draft", "profile=WD&returning=true")
			+ listItem("Publish as a Discontinued Draft", "profile=DISC");
		} else if (spec.status === "Candidate Recommendation Draft" || spec.status === "Candidate Recommendation Snapshot") {
			list.innerHTML = listItem("Revise the Candidate Recommendation Draft", "profile=CR&cr=draft")
			+ listItem("Revise as a Candidate Recommendation Snapshot", "profile=CR&cr=snapshot")
			+ listItem("Advance to Recommendation", "profile=newREC")
			+ listItem("Return to Working Draft", "profile=WD&returning=true")
			+ listItem("Publish as a Discontinued Draft", "profile=DISC");
		} else if (spec.status === "Recommendation") {
			list.innerHTML = INPLACE + listItem("Revise the Recommendation with only editorial changes", "profile=REC&rec=editorial")
			+ listItem("Publish as a Recommendation with candidate corrections (substantive changes)", "profile=REC&cr=candidate-corrections")
			+ listItem("Publish as a Recommendation with candidate additions (new features)", "profile=REC&cr=candidate-additions")
			+ listItem("Incorporate candidate corrections (substantive changes)", "profile=REC&cr=substantive")
			+ listItem("Incorporate candidate additions (new features)", "profile=REC&cr=features")
			+ listItem("Publish as a First Public Working Draft with new features (if your current Recommendation doesn't allow those)", "profile=FPWD")
			+ listItem("Propose to rescind the Recommendation", "profile=PR-RSCND")
			+ listItem("Propose to obsolete or supersede the Recommendation", "profile=PR-OBSL");
		} else if (spec.status === "Draft Registry") {
			list.innerHTML = listItem("Revise the Draft Registry", "profile=DRAFT-REGISTRY")
			+ listItem("Advance to Candidate Registry", "profile=CRY&cr=new")
			+ listItem("Publish as a Note (which you may mark as retired)", "profile=WG-NOTE");
		} else if (spec.status === "Candidate Registry") {
			list.innerHTML = listItem("Revise the Candidate Registry Draft", "profile=CRY&cr=draft")
			+ listItem("Revise as a Candidate Registry Snapshot", "profile=CRY&cr=snapshot")
			+ listItem("Request an Advisory Committee Review", "profile=RY&rec=new")
			+ listItem("Return to Draft Registry", "profile=DRAFT-REGISTRY&returning=true")
			+ listItem("Publish as a Note (which you may mark as retired)", "profile=WG-NOTE");
		} else if (spec.status === "Candidate Registry Draft" || spec.status === "Candidate Registry Snapshot") {
			list.innerHTML = listItem("Revise the Candidate Registry Draft", "profile=CRY&cr=draft")
			+ listItem("Revise as a Candidate Registry Snapshot", "profile=CRY&cr=snapshot")
			+ listItem("Request an Advisory Committee Review", "profile=RY&rec=new")
			+ listItem("Return to Draft Registry", "profile=DRAFT-REGISTRY&returning=true")
			+ listItem("Publish as a Note (which you may mark as retired)", "profile=WG-NOTE");
		} else if (spec.status === "Registry") {
			list.innerHTML = INPLACE + listItem("Revise the Registry", "profile=RY&rec=update")
			+ listItem("Propose to obsolete or supersede the Registry", "profile=PRY-OBSL");
		} else if (spec.status === "Draft Note") {
			list.innerHTML = listItem("Revise the Draft Note", "profile=DRAFT-NOTE")
			+ listItem("Publish as a Note (which you may mark as retired)", "profile=WG-NOTE");
		} else if (spec.status === "Group Note" || spec.status === "Note") {
			list.innerHTML = INPLACE
			+ listItem("Return to Draft Note", "profile=DRAFT-NOTE")
			+ listItem("Advance to W3C Statement", "profile=STMT")
			+ listItem("Revise the Note (which you may mark as retired)", "profile=WG-NOTE");
		} else if (spec.status === "Retired") {
			list.innerHTML = listItem("Propose to restore the Recommendation", "");
		} else {
			list.innerHTML = listItem("... Not sure yet. See the transition requirements", "");
		}
		next.style.display = "block";
	}
	
	function defaultStep() {
		const next = document.getElementById("next");
		const list = document.getElementById("step_list");
		list.innerHTML = listItem("Publish as a First Public Working Draft", "profile=FPWD")
		+ listItem("Publish as a Working Group Note", "profile=WG-NOTE");
		next.style.display = "block";
	}
	
	function updateSpec(spec) {
		const div = document.getElementById("spec");
		if (spec === undefined) {
			div.style.display = "none";
			document.getElementById("next").style.display = "none";
			defaultStep();
		} else {
			for (const key in spec) {
				const elt = document.getElementById("spec_" + key);
				if (elt !== null) {
					const obj = spec[key];
					if (key === "deliverers") {
						elt.innerHTML = "";
						const groups = spec.deliverers
						for (let index = 0; index < groups.length; index++) {
							let group = groups[index];
							let a = document.createElement("a");
							a.href = group._links.homepage.href;
							a.textContent = group.name;
							elt.appendChild(a);
							if (group["is_closed"]) {
								elt.appendChild(document.createTextNode(" (closed) "));
							}
							elt.appendChild(document.createTextNode(", "));
						}						
					} else if (obj instanceof Promise) {
						console.log("[Promise] " + key)
					} else if (obj.startsWith("https://") || obj.startsWith("http://")) {
						elt.innerHTML = "<a href='" + obj + "'>" + obj + "</a>";
					} else {
						elt.textContent = obj;
					}
				}
			}
			div.style.display = "block";
			nextSteps(spec);
		}
	}
	
	function adjustForms() {
		// adjust the HTML forms according to the config
		trace("adjustForms for " + JSON.stringify(config));
		if (config.shortname) {
			document.getElementById("shortname").value = config.shortname;
		}
	}
	
	// initialization
	
	function init() {
		document.getElementById("spec").style.display = "none";
		document.getElementById("next").style.display = "none";
		
		// each one of those config parameters are matching the ones in the option/input elements
		if (config.shortname) {
			findShortname(config.shortname);
			adjustForms();
		}
		
		function onshortname(e) {
			const s = e.target.value.trim();
			if (s.length > 2) {
				findShortname(s);
			}
		}
		document.querySelector("input[type=text]").addEventListener("input", onshortname);
	}
	window.addEventListener("load", init);

	trace("restored " + window.location.href);
</script>
